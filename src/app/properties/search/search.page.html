<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button [defaultHref]="['/properties/tabs/discover']" (click)="goBack()">
        
      </ion-back-button>
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title class="ion-text-center">{{labels.discoverOffers}}</ion-title>
  </ion-toolbar>

</ion-header>

<ion-content>
  <ion-spinner *ngIf="isLoading"></ion-spinner>
    <ion-grid *ngIf="!isLoading" class="ion-margin-bottom: 10px;margin-top: 0px; padding-top: 0px" 
    style="overflow: scroll;">
      <ion-row class="ion-text-center" style="margin-top: 0px; padding-top: 0px">
        <ion-col size-xs="12" style="scroll-behavior: auto;">
          <ion-item-sliding #slidingItem *ngIf="loadedProperties">
            <ion-list lines="none">
              <!-- *************************************** -->
              <ion-item *ngIf="!theProperty"
                ><ion-label class="ion-text-center"
                  >لايوجد ممتلكات للعرض</ion-label
                ></ion-item
              >
              <ion-item *ngIf="theProperty">
                <ion-card class="ion-no-padding" style="border-radius:5px; border: 1px solid white;" >
                  <!-- ion card header -->
                  <ion-card-header class="">
                    <ion-grid
                      class="ion-no-padding;"
                      style="border-radius:5px;
                          border: 1px solid black;"
                    >
                    
    
                      <!--<ion-label
                                  class="ion-text-center"
                                  *ngIf="!theProperty.hasOffer"
                                >
                                  {{ theProperty.price }}</ion-label
                                >-->
    
                      <ion-row
                        style="border-radius:5px;
                            border: 1px solid red;"
                      >
                        <ion-col
                          size-xs="8"
                          style="border-radius:5px; border: 1px double blue;"
                        >
                          <ion-grid >
                              <ion-row style="border-radius:5px;
                              border: 1px solid yellowgreen;">
                                  <ion-col size="2" sort="start">
                                    <!-- <ion-item> -->
                                      <ion-label
                                        *ngIf="!this.isBooked"
                                        style="font-size: 15;padding-left: 0px; padding-right: 0px;padding-top: 0px;margin-top: 0px; margin-bottom: 0px"
                                        ><ion-icon
                                          (click)="onBookMark(this.theProperty.id)"
                                          style="color: gray"
                                          size="large"
                                          name="ios-bookmark"
                                        ></ion-icon
                                      ></ion-label>
                                      <ion-label
                                        *ngIf="this.isBooked"
                                        style="font-size: 15;padding-left: 0px; padding-right: 0px;padding-top: 0px;margin-top: 0px; margin-bottom: 0px"
                                        ><ion-icon
                                          (click)="onBookMark()"
                                          style="color: rgb(194, 82, 57)"
                                          size="large"
                                          name="ios-bookmark"
                                        ></ion-icon
                                      ></ion-label>
                                    <!-- </ion-item> -->
                                  </ion-col>
                                  <ion-col size="10"></ion-col>
                                </ion-row>
                            <ion-row>
                              <ion-col size="6">
                                <ion-grid>
                                  <ion-row>
                                    
                                    <ion-col size="12">
                                      <ion-label class="ion-text-center"
                                        >{{ theProperty.space }}</ion-label
                                      >
                                    </ion-col>
                                  </ion-row>
                                  <ion-row>
                                    <ion-col size-xs="12"
                                      ><ion-label
                                        class="ion-text-center;color:black"
                                      >
                                        {{theProperty.kind }}</ion-label
                                      ></ion-col
                                    >
                                  </ion-row>
                                  <ion-row>
                                    <ion-col size-xs="12"
                                      ><ion-label class="ion-text-center"
                                        >{{ theProperty.address }}</ion-label
                                      ></ion-col
                                    >
                                  </ion-row>
                                </ion-grid>
                              </ion-col>
                              <ion-col size="6">
                                <ion-grid>
                                  <ion-row>
                                    <ion-col size="12">
                                      <ion-label
                                        class="ion-text-center; justify-content: center;
                                            align-items: center;"
                                        *ngIf="!theProperty.hasOffer"
                                        >{{ theProperty.price }}</ion-label
                                      >
                                    </ion-col>
                                  </ion-row>
                                  <ion-row> </ion-row>
                                </ion-grid>
    
                                <ion-label
                                  class="ion-text-center"
                                  *ngIf="theProperty.hasOffer"
                                  style="text-decoration: line-through"
                                  >{{ theProperty.price }}</ion-label
                                >
                              </ion-col>
                            </ion-row>
                          </ion-grid>
                        </ion-col>
    
                        <ion-col size-xs="4">
                          <ion-grid>
                            <ion-row>
                              <ion-col size="12">
                                <ion-img
                                  class="id-pic"
                                  src="https://cdn2.iconfinder.com/data/icons/rcons-user/32/male-circle-512.png"
                                ></ion-img>
                                <ion-label class="ion-text-center">
                                  {{theProperty.owner}} `
                                </ion-label>
                              </ion-col>
                            </ion-row>
                          </ion-grid>
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ion-card-header>
                  <!-- </ion-col> -->
                  <!-- Header photo -->
    
                  <!-- End of header details -->
                  <!-- </ion-row> -->
                  <!-- End of Header Detail -->
    
                  <ion-card-content no-padding>
                    <ion-grid no-padding>
                      <ion-row>
                        <ion-col size="12">
                          <ion-grid>
                            <ion-row>
                              <ion-col size-xs="2">
                                <ion-label class="ion-text-center">
                                  <ion-icon name="tv"></ion-icon
                                  ><ion-text
                                    style="font-size: 8px;"
                                    *ngIf="theProperty.livingrooms"
                                    >{{theProperty.livingrooms}}</ion-text
                                  ></ion-label
                                >
                              </ion-col>
                              <ion-col size-xs="2">
                                <ion-label class="ion-text-center"
                                  ><ion-icon name="bicycle"></ion-icon
                                  ><ion-text
                                    style="font-size: 8px;"
                                    *ngIf="theProperty.livingrooms"
                                    >{{theProperty.bathrooms}}</ion-text
                                  ></ion-label
                                >
                              </ion-col>
                              <ion-col size-xs="2">
                                <ion-label class="ion-text-center"
                                  ><ion-icon name="car"></ion-icon
                                  ><ion-text
                                    style="font-size: 8px;"
                                    *ngIf="theProperty.livingrooms"
                                    >{{theProperty.bedrooms}}</ion-text
                                  ></ion-label
                                >
                              </ion-col>
                              <ion-col size-xs="2">
                                <ion-label class="ion-text-center">
                                  <ion-icon name="boat"></ion-icon
                                  ><ion-text
                                    style="font-size: 8px;"
                                    *ngIf="theProperty.livingrooms"
                                    >{{theProperty.garages}}</ion-text
                                  ></ion-label
                                >
                              </ion-col>
                              <ion-col size-xs="2">
                                <ion-label class="ion-text-center">
                                  <ion-icon name="train"></ion-icon
                                  ><ion-text
                                    style="font-size: 8px;"
                                    *ngIf="theProperty.livingrooms"
                                    >{{theProperty.gardens}}</ion-text
                                  ></ion-label
                                >
                              </ion-col>
                              <ion-col size-xs="2">
                                <ion-label class="ion-text-center"
                                  ><ion-icon name="walk"></ion-icon
                                  ><ion-text
                                    style="font-size: 8px;"
                                    *ngIf="theProperty.livingrooms"
                                    >{{theProperty.ketchins}}</ion-text
                                  ></ion-label
                                >
                              </ion-col>
                            </ion-row>
                          </ion-grid>
                        </ion-col>
                      </ion-row>
                      <ion-row size-xs="12">
                        <ion-col >
                          
                           
                              <ion-label *ngIf="messages" class="ion-text-center"  style="margin-right: 30px; margin-left: 30px"
                                >List of messages of {{theProperty.userId}} for
                                {{theProperty._id}}...go here.</ion-label
                              >
                         
                              <ion-grid *ngIf="map">
                                <ion-row>
                                  <ion-col size-sm="6" offset-sm="3" clsss="ion-text-center; padding"  style="margin-right: 30px; margin-left: 30px">
                                    {{ theProperty.location.address }}
                                  </ion-col>
                                </ion-row>
                                <ion-row>
                                  <ion-col size-sm="6" offset-sm="3" clsss="ion-text-center; padding"  style="margin-right: 35px; margin-left: 35px">
                                    <ion-img
                                      role="button"
                                      (click)="onShowFullMap()"
                                      class="location-img"
                                      [src]="theProperty.location.staticmapimageurl"
                                    ></ion-img>
                                  </ion-col>
                                </ion-row>
                              </ion-grid>
                           

                           
                              <ion-grid *ngIf="image">
                                <ion-row>
                                  <ion-col size-sm="12" >
                                    <div >

                                      <ion-img
                                      class="main-pic"
                                      src="{{theProperty.propertyPic}}"
                                      >
                                      
                                    </ion-img>                             
                                  </div>

                                  </ion-col>
                                </ion-row>
                               
                              </ion-grid>
                           
                         
                          
                          
                        </ion-col>
                      </ion-row>
                      <ion-row style="margin-bottom: 0%; margin-top: 3%;">
                        <ion-col size-xs="2">
                          <ion-label
                            *ngIf="!listActive"
                            class="ion-text-center"
                            style="margin-right: 3%"
                            (click)="onList()"
                            ><ion-icon size="small" name="list"></ion-icon>
                          </ion-label>
                          <ion-label
                            *ngIf="listActive"
                            class="ion-text-center"
                            style="margin-right: 3%; color:dodgerblue"
                            ><ion-icon size="small" name="list"></ion-icon>
                          </ion-label>
                        </ion-col>
    
                        <ion-col size-xs="2">
                          <ion-label
                            *ngIf="!messageActive"
                            class="ion-text-center"
                            style="margin-right: 3%"
                            (click)="onMessages()"
                            ><ion-icon size="small" name="mail"></ion-icon>
                          </ion-label>
                          <ion-label
                            *ngIf="messageActive"
                            class="ion-text-center"
                            style="margin-right: 3%; color:dodgerblue;"
                            ><ion-icon size="small" name="mail"></ion-icon>
                          </ion-label>
                        </ion-col>
                        <ion-col size-xs="2">
                          <ion-label
                            *ngIf="!mapActive"
                            class="ion-text-center"
                            style="margin-right: 3%"
                            (click)="onMap()"
                            ><ion-icon size="small" name="map"></ion-icon>
                          </ion-label>
                          <ion-label
                            *ngIf="mapActive"
                            class="ion-text-center"
                            style="margin-right: 3%; color:dodgerblue"
                            ><ion-icon size="small" name="map"></ion-icon>
                          </ion-label>
                        </ion-col>
                        <ion-col size-xs="2">
                          <ion-label
                            *ngIf="!imageActive"
                            class="ion-text-center"
                            style="margin-right: 3%"
                            (click)="onImage()"
                            ><ion-icon size="small" name="image"></ion-icon>
                          </ion-label>
                          <ion-label
                            *ngIf="imageActive"
                            class="ion-text-center"
                            style="margin-right: 3%; color:dodgerblue"
                            ><ion-icon size="small" name="image"></ion-icon>
                          </ion-label>
                        </ion-col>
                        <ion-col size-xs="2">
                          <!-- <ion-label class="ion-text-right" style="margin-right: 3%;margin-bottom: 3%;">{{theProperty.endDate | date}}: {{this.labels.endDate}}</ion-label> -->
                          <ion-label
                            *ngIf="likeOn"
                            class="ion-text-center"
                            style="margin-left: 3%"
                            (click)="onLike(theProperty.id, $event)"
                            ><ion-icon
                              size="small"
                              name="heart"
                              style="color: rgb(194, 82, 57)"
                            ></ion-icon
                            ><ion-text
                              style="font-size: 8px;"
                              *ngIf="this.loadedLikes"
                              >{{ howManyLikes(theProperty.id) }}</ion-text
                            ></ion-label
                          >
                          <ion-label
                            *ngIf="!likeOn"
                            class="ion-text-center"
                            style="margin-left: 3%"
                            (click)="onLike(theProperty._id,$event)"
                            ><ion-icon
                              size="small"
                              name="heart"
                              style="color: gray"
                            ></ion-icon
                            ><ion-text
                              style="font-size: 8px;"
                              *ngIf="this.loadedLikes"
                              >{{howManyLikes(theProperty.id)}}</ion-text
                            ></ion-label
                          >
                        </ion-col>
                        <ion-col size-xs="2">
                          <ion-label
                          *ngIf="viewOn"
                          class="ion-text-center"
                          style="margin-left: 3%"
                          (click)="onView(theProperty.id, $event)"
                          ><ion-icon
                            size="small"
                            name="eye"
                            style="color: dodgerblue"
                          ></ion-icon
                          ><ion-text
                            style="font-size: 8px;"
                            *ngIf="this.viewOn"
                            >{{ howManyViews(theProperty.id) }}</ion-text
                          ></ion-label
                        >
                          <ion-label
                          *ngIf="!viewOn"
                            class="ion-text-center"
                            style="margin-right: 3%"
                            ><ion-icon
                             size="small"
                              name="eye"
                              style="color: gray"
                              ></ion-icon
                            ><ion-text
                              *ngIf="this.viewOn"
                              style="font-size: 8px;"
                              >{{loadedViews.length}}</ion-text
                            >
                          </ion-label>
                        </ion-col>
                      </ion-row>
                      <ion-row>
                        <ion-col size-xm="12">
                          <ion-grid class=" ion-no-padding">
                            <hr />
    
                            <ion-row
                              style="align-content: center;margin-top:0;margin-right: 5%;margin-left: 5%; margin-bottom: 2%;"
                            >
                              <ion-col size-xs="7">
                                <ion-label
                                  class="ion-text-left"
                                  style="justify-content: center;margin-right: 3%;color:black"
                                  >{{theProperty.startDate | date}}:
                                  {{this.labels.startDate}}</ion-label
                                >
                              </ion-col>
                              <ion-col size-xs="1">
                                <ion-label
                                  class="ion-text-right"
                                  style="margin-right: 0% ; color: rgb(255, 153, 0)"
                                  ><ion-icon name="star"></ion-icon>
                                </ion-label>
                              </ion-col>
                              <ion-col size-xs="1">
                                <ion-label
                                  class="ion-text-right"
                                  style="margin-right: 0% ; color: rgb(255, 153, 0)"
                                  ><ion-icon name="star"></ion-icon>
                                </ion-label>
                              </ion-col>
                              <ion-col size-xs="1">
                                <ion-label
                                  class="ion-text-right"
                                  style="margin-right: 0% ; color: rgb(255, 153, 0)"
                                  ><ion-icon name="star"></ion-icon>
                                </ion-label>
                              </ion-col>
                              <ion-col size-xs="1">
                                <ion-label
                                  class="ion-text-right"
                                  style="margin-right: 0%"
                                  ><ion-icon name="star"></ion-icon>
                                </ion-label>
                              </ion-col>
                              <ion-col size-xs="1">
                                <ion-label
                                  class="ion-text-right"
                                  style="margin-right: 3%"
                                  ><ion-icon name="star"></ion-icon>
                                </ion-label>
                              </ion-col>
                            </ion-row>
                          </ion-grid>
                        </ion-col>
                      </ion-row>
                    </ion-grid>
                  </ion-card-content>
                  <!-- </ion-col>
                    </ion-row> -->
                  <!-- ******************************     Facilities details            ******************************* -->
                  <!-- </ion-grid> -->
                </ion-card>
              </ion-item>
    
              <ion-item-options slot="end">
                <ion-item-option color="dark">
                  <ion-label class="ion-text-center"
                    ><p>{{labels.book}}</p></ion-label
                  >
                  <ion-icon name="create" slot="top"></ion-icon>
                </ion-item-option>
                <ion-item-option color="dark">
                  <ion-label class="ion-text-center"
                    ><p>{{labels.show}}</p></ion-label
                  >
                  <ion-icon name="create" slot="top"></ion-icon>
                </ion-item-option>
              </ion-item-options>
            </ion-list>
          </ion-item-sliding>
        </ion-col>
      </ion-row>
    
      <ion-row>
        <ion-col> </ion-col>
      </ion-row>
    </ion-grid>
  

    <!-- <ion-content position="fixed" class="ion-content-below-property-card"  *ngIf="listOfProperties" scrollY="true">
    <ion-list lines="none">  <ion-item><ion-label  style="margin-right: 30px; margin-left: 30px; color:chocolate" text-center *ngIf="this.loadedProperties">{{this.loadedProperties.length}} عدد المنازل المعروضة</ion-label></ion-item></ion-list>
    <ion-virtual-scroll [items]="this.loadedProperties" approxHeaderHeight="30px">
      <ion-item
      approxItemHeight="30px"
      style="margin-right: 30px; margin-left: 30px"
      *virtualItem="let property of "
      >
        <ion-thumbnail slot="end">
          <ion-img
            src="{{property.propertyPic}}"
            class="thumbnail-pic"
            (click)="clickedProperty(property.id)"
          ></ion-img>
        </ion-thumbnail>
        <ion-label class="ion-text-right">{{property.description}}</ion-label>
      </ion-item>
    </ion-virtual-scroll>
  </ion-content> -->
  
    <!-- <ion-text style="color: dodgerblue"> {{theProperty.userId}} </ion-text> for <ion-text  style="color: dodgerblue">{{theProperty._id}}</ion-text>...go here. -->
  
  
    <!-- <ion-grid *ngIf="image">
      <ion-row>
        <ion-col sizeLg="4" sizeMd="4" sizeXs="6" *ngFor="let image of [1,2,3]">
          <div
            class="img-wrapper"
            [style.background-image]="'url(assets/img/image-gallery/' + image + '.jpeg)'"
          ></div>
        </ion-col>
      </ion-row>
    </ion-grid> -->
  

  </ion-content>